<source>
  type tail
  path /var/log/nginx/access.log #...or where you placed your Apache access log
  pos_file /var/log/td-agent/nginx-access.log.pos # This is where you record file position
  tag esthenos.nginx.access #fluentd tag!
  #format nginx # Do you have a custom format? You can write your own regex.
  format /^(?<remote>[^ ]*) (?<host>[^ ]*) (?<user>[^ ]*) \[(?<time>[^\]]*)\] "(?<method>\S+)(?: +(?<path>[^\"]*) +\S*)?" (?<code>[^ ]*) (?<size>[^ ]*) "(?<session_id>\S+)?" "(?<auth_token>\S+)?"(?: "(?<referer>[^\"]*)" "(?<agent>[^\"]*)")?$/
  time_format %d/%b/%Y:%H:%M:%S %z  
</source>

<match  **>
  type mongo
  user pitaya
  password od9tBCBKB7JhQM
  host 162.243.6.61 #(optional; default="162.243.6.61")
  port 27017  #(optional; default=27017)
  database pitaya_logs #(required)
  collection console
</match>
